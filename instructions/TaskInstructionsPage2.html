{% extends "global/Page.html" %}
{% load otree static %}

{% block title %}
{% endblock %}

{% block content %}
    <style>
        body {
            margin: 0 20%;
        }

        .container {
            text-align: center;
        }

        .image-container {
            display: flex;
            justify-content: center;
            margin-top: 20px;
        }

        .dual-image-container {
            display: flex;
            justify-content: center;
            gap: 150px;
            margin: 20px 0;
        }

        .dual-image-container img {
            width: 100%;
            height: auto;
            max-width: none;
        }

        .large-instruction-image {
            width: 400px !important;
            max-width: none !important;
        }

        .image-with-caption {
            display: flex;
            flex-direction: column;
            align-items: center;
            width: 48%;
            max-width: 400px;
        }

        .image-with-caption img {
            width: 100%;
            height: auto;
            max-width: 300px;
        }

        .image-caption {
            margin-top: 10px;
            text-align: center;
            font-style: italic;
            max-width: 300px;
        }

        p {
            font-size: 24px;
        }

        /* Consolidated highlight boxes */
        .blue-highlight-box, .red-highlight-box, .green-highlight-box {
            padding: 10px;
            margin: 10px 0;
            border-radius: 5px;
        }

        .blue-highlight-box {
            background-color: #e3f2fd;
            border: 2px solid #2196f3;
        }

        .red-highlight-box {
            background-color: #ffebee;
            border: 2px solid #f44336;
            text-align: center;
        }

        .green-highlight-box {
            background-color: #e6ffe6;
            border: 2px solid #4CAF50;
            padding: 20px;
            margin: 20px 0;
        }

        .boxes-container {
            display: flex;
            justify-content: center;
            gap: 20px;
            margin: 20px 0;
        }

        .box-container {
            width: 48%;
            max-width: 400px;
        }

        .green-box, .red-box {
            width: 100%;
            padding: 20px;
            border-radius: 10px;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: space-between;
            height: 300px;
        }

        .green-box {
            background-color: #b8ffba;
            border: 2px solid #29571f;
            color: rgb(0, 0, 0);
        }

        .red-box {
            background-color: #ff766c;
            border: 2px solid #7e0d05;
            color: rgb(0, 0, 0);
        }

        .box-image {
            max-width: 100%;
            max-height: 150px;
            margin-top: -10px;
        }

        .green-highlight-box-image-container {
            display: flex;
            flex-wrap: wrap;
            justify-content: center;
            gap: 20px;
            margin-top: 20px;
        }

        .green-highlight-box-image-container img {
            width: 100px;
            height: auto;
            border-radius: 5px;
        }

        .red-highlight-box p, .blue-highlight-box p {
            font-weight: bold;
        }

        .normal-weight {
            font-weight: normal !important;
        }

        .feedback-image {
            display: flex;
            flex-direction: column;
            align-items: center;
        }

        .feedback-image img {
            width: 750px;
            height: auto;
        }

        .feedback-image .image-caption {
            margin-top: 10px;
            text-align: center;
            font-style: italic;
            max-width: 750px;
            font-size: 1.2rem;
        }

        button {
            color: #fff;
            background-color: #007bff;
            border: 1px solid transparent;
            font-size: 1.5rem;
            padding: 10px 20px;
            border-radius: 0.25rem;
        }
    </style>

    <div class="container">
        <h2><b>Second Choice/Bet and Feedback</b></h2>
        <br>
        <div class="blue-highlight-box">
        <p><b>After the choices for the other players have been displayed, you are presented with the opportunity to revise your first choice 
            and bet by making a second choice and second bet, before being presented with the results for yourself and others in the group.</b></p>
        </div>
        <br>
        <p>You will firstly be asked to make a second choice, <b>which may be the same or different to your first choice.</b>
            To help with this, <b>your first choice will already be highlighted in yellow.</b>
        </p>
        <br>
        <p>Again, you will have 3 seconds, after which a random choice will be made if you do not choose manually.</p>
        <br>
        <div class="green-highlight-box">
            <p><b>To make your choice, press either the left or right arrow key on your keyboard.</b></p>
            <div class="green-highlight-box-image-container">
                <img src="{% static 'instructions/TaskInstructionsPage1/left_arrow.png' %}" alt="Left">
                <img src="{% static 'instructions/TaskInstructionsPage1/right_arrow.png' %}" alt="Right">
            </div>
        </div>
        <br>
        <p>The image associated with your second choice will subsequently be highlighted with a red box, <b>regardless if it is different to or the same as your first choice.</b></p>
        <br>
        <p>In the example below, the player initially chose the blue image, but switched to the green image for their second choice.</p>
        <div class="dual-image-container">
            <div class="image-with-caption">
                <img src="{% static 'instructions/TaskInstructionsPage2/choice2.png' %}" alt="Choice 2" class="large-instruction-image">
                <p class="image-caption">Before making the second choice</p>
            </div>
            <div class="image-with-caption">
                <img src="{% static 'instructions/TaskInstructionsPage2/choice2_highlighted.png' %}" alt="Choice 2 Highlighted" class="large-instruction-image">
                <p class="image-caption">After selecting the image on the right.</p>
            </div>
        </div>
        <br>
        <p>You will then be asked to make your second bet, <b>which can be the same or different to your first bet.</b> 
            To help with this, your first bet will be highlighted in yellow. 
        <br>
        <div class="green-highlight-box">
            <p><b>To make your bet, press either the '1', '2' or '3' key on your keyboard.</b></p>
            <div class="green-highlight-box-image-container">
                <img src="{% static 'instructions/TaskInstructionsPage1/1_key.png' %}" alt="1">
                <img src="{% static 'instructions/TaskInstructionsPage1/2_key.png' %}" alt="2">
                <img src="{% static 'instructions/TaskInstructionsPage1/3_key.png' %}" alt="3">
            </div>
            <br>
            <br>
            <p><b>Again this should reflect your confidence: “1” (not confident), “2” (reasonably confident), or “3” (very confident)</b></p>
        </div>
        <br><p>
            This second bet will be highlighted by a red box, regardless if it is the same or different to your first.
            You will have 3 seconds, after which a random bet will be made for you if you do not choose manually within the time frame.</p>
            <br>
            <p>In the example below, the player made a first bet of '3', indicating that they were <b>very confident</b> in their first image choice, but switched to a 
                second bet of '2', indicating that they were <b>reasonably confident</b> in their second choice.
            </p>
            <div class="dual-image-container">
                <div class="image-with-caption">
                    <img src="{% static 'instructions/TaskInstructionsPage2/bet2.png' %}" alt="Bet 2" class="large-instruction-image">
                    <p class="image-caption">Before making the second bet</p>
                </div>
                <div class="image-with-caption">
                    <img src="{% static 'instructions/TaskInstructionsPage2/bet2_highlighted.png' %}" alt="Bet 2 Highlighted" class="large-instruction-image">
                    <p class="image-caption">After making a second bet of 2.</p>
                </div>
            </div>
        <br>
        <div class="red-highlight-box">
            <p class="normal-weight">Your bonus payment is <b>also partly determined by your second choice and bet.</b>
                It is therefore important to <b>make your second choice and bet appropriately</b> to maximise your bonus.</p>
        </div>
        <br>
        <p>Finally, you will receive <b>feedback for your second choice/bet</b> as well as the second choices made by others within the group.</p>

        <div class="image-container">
            <img src="{% static 'instructions/TaskInstructionsPage2/feedback.png' %}" alt="Feedback" width="600" height="auto">
        </div>
        <br>
        <br>

        <p>For yourself, in the centre of the screen, you will see a coin indicating whether you have won or lost points based on the image selected.</p>

        <div class="boxes-container">
            <div class="box-container">
                <div class="green-box">
                    <p><b>If the coin is presented by itself, it means that you won points in that round.</b></p>
                    <img src="{% static 'instructions/win.png' %}" class="box-image">
                </div>
            </div>
            <div class="box-container">
                <div class="red-box">
                    <p><b>If there is a red cross through the coin, it means that you lost points in that round.</b></p>
                    <img src="{% static 'instructions/loss.png' %}" class="box-image">
                </div>
            </div>
        </div>
        <br>
        <p>You also are provided with the <b>amount of points</b> gained or lost for that round.
            <b>The amount of points displayed represents your second choice and second bet only.</b></p>
        <br>
        <div class="red-highlight-box">
            <p class="normal-weight">As with the first bet, it is important that you also make your second bet appropriately based on how confident you are.</p>
            <p>For example, if you bet '3' and win, you will receive 60 points, but if you bet '3' and lose, you will lose 60 points (as the bet is multiplied by 20).</p>
            <p>Conversely, if you bet '1' and win, you will only receive 20 points, but if you bet '1' and lose, you will only lose 20 points.</p>
        </div>
        <br>
        <div class="dual-image-container">
            <div class="image-with-caption">
                <img src="{% static 'instructions/TaskInstructionsPage2/points.png' %}" alt="Points" class="large-instruction-image">
                <p class="image-caption">Getting feedback that you have won 40 points.</p>
            </div>
            <div class="image-with-caption">
                <img src="{% static 'instructions/TaskInstructionsPage2/points_loss.png' %}" alt="Points Loss" class="large-instruction-image" width="600">
                <p class="image-caption">Getting feedback that you have lost 60 points.</p>
            </div>
        </div>
        <br>
        <div class="blue-highlight-box">
            <p class="normal-weight">Remember that your bonus payment is calculated from points chosen <b>randomly on each round from the points associated with either your first choice/bet or your second choice/bet.</b>
                Feedback is only given for your second choice/bet, so you can learn which image is being rewarded. You should ultimately treat both choices and bets as if they were going to contribute to your score.</p>
        </div>
        <br>
        <p>You will also see the second choice for all the other players in the group (so you can determine whether they changed their choice) and an icon indicating whether they won or lost.
            <b>However, you will not see how much they gained or lost.</b></p>
        <br>
        <p>Again, the images will depict whether or not the second choices were also made by the players themselves, or by the computer.</p>
        <br>
        <div class="image-container feedback-image">
            <img src="{% static 'instructions/TaskInstructionsPage2/feedback_second.png' %}" alt="Points" width="700" height="auto">
            <div class="image-caption">
                <span>In this example, you can see the first choices were made by the computer for Players 3 and 4,
                    and the second choices were made by the computer for Player 1 and Player 2. You can subsequently see that the 
                green image was rewarded (regardless of whether the second choice was made manually or by the computer), whilst the blue image reduced the players score.</span>
            </div>
        </div>
        <br>
        <br>
        <p>After this, you will move onto the next round, where you will start again by making a new first choice. 
            <b>There are a total of 60 rounds, lasting approximately 20 minutes.</b></p>
        <br>
        <p>Please make sure that you understand how the task works, and what is expected before moving ahead as you will not be able to return to this page.
            Feel-free to re-read the instructions on this page if you are unsure.</p>
        <br>
        <p>When you are ready, please press the button below to move onto the next page of instructions.</p>

        <button style="color: #fff; background-color: #007bff; border: 1px solid transparent; font-size: 1.5rem; padding: 10px 20px; border-radius: 0.25rem;">
            Next
        </button>
    </div>

{% endblock %}