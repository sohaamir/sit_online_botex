{% extends "global/Page.html" %}
{% load otree static %}

{% block title %}
{% endblock %}

{% block content %}
    <style>
        body {
            margin: 0 20%;  /* Add margins to the sides of the page */
        }

        .container {
            justify-content: center;
            align-items: center;
            max-width: 90%;
            font-size: 1.2vw;
            text-align: center;
        }

        .image-container {
            display: flex;
            justify-content: center;
            margin-top: 20px;
        }

        .dual-image-container {
            display: flex;
            justify-content: center;
            gap: 50px;
            margin-top: 20px;
            margin-bottom: 20px;
        }

        .dual-image-container img {
            width: 100%;
            height: auto;
            max-width: none; 
        }

        .large-instruction-image {
            width: 400px !important;
            max-width: none !important;
        }

        .image-with-caption {
            display: flex;
            flex-direction: column;
            align-items: center;
            width: 48%;
            max-width: 400px;
        }

        .image-with-caption img {
            width: 100%;
            height: auto;
            max-width: 300px;
        }

        .image-caption {
            margin-top: 10px;
            text-align: center;
            font-style: italic;
            max-width: 300px;
        }

        p {
            font-size: 24px;
        }

        .boxes-container {
            display: flex;
            justify-content: center;
            gap: 20px;
            margin-top: 20px;
            margin-bottom: 20px;
        }

        .box-container {
            width: 48%;
            max-width: 400px;
        }

        .green-box, .red-box {
            width: 100%;
            padding: 20px;
            border-radius: 10px;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: space-between;
            height: 300px;
        }

        .green-box {
            background-color: #b8ffba;
            border: 2px solid #29571f;
            color: rgb(0, 0, 0);
        }

        .red-box {
            background-color: #ff766c;
            border: 2px solid #7e0d05;
            color: rgb(0, 0, 0);
        }

        .box-image {
            max-width: 100%;
            max-height: 150px;
            margin-top: -10px;
        }

        .red-highlight-box {
            background-color: #ffebee;
            border: 2px solid #f44336;
            padding: 10px;
            margin: 10px 0;
            border-radius: 5px;
            text-align: center;
        }

        .blue-highlight-box {
            background-color: #e3f2fd;
            border: 2px solid #2196f3;
            padding: 10px;
            margin: 10px 0;
            border-radius: 5px;
        }

        .green-highlight-box {
            background-color: #e6ffe6;
            border: 2px solid #4CAF50;
            padding: 20px;
            margin: 20px 0;
            border-radius: 5px;
        }

        .green-highlight-box-image-container {
            display: flex;
            flex-wrap: wrap;
            justify-content: center;
            gap: 20px;
            margin-top: 20px;
        }

        .green-highlight-box-image-container img {
            width: 100px;
            height: auto;
            border-radius: 5px;
        }

        .red-highlight-box p, .blue-highlight-box p {
            font-weight: bold;
        }

        .normal-weight {
            font-weight: normal !important;
        }

        .blue-highlight-box-left-aligned {
            background-color: #e3f2fd;
            border: 2px solid #2196f3;
            padding: 10px;
            margin: 10px 0;
            border-radius: 5px;
            text-align: left;
        }

        .feedback-image {
            display: flex;
            flex-direction: column;
            align-items: center;
        }

        .feedback-image img {
            width: 750px;
            height: auto;
        }

        .feedback-image .image-caption {
            margin-top: 10px;
            text-align: center;
            font-style: italic;
            max-width: 750px; /* Match the width of the image */
        }
    </style>

    <div class="container">
        <h2><b>Second Choice/Bet and Feedback</b></h2>
        <br>
        <div class="blue-highlight-box">
        <p><b>After the choices for the other players have been displayed, you are presented with the opportunity to revise your first choice 
            and bet by making a second choice and second bet, before being presented with the results for yourself and others in the group.</b></p>
        </div>
        <br>
        <p>You will firstly be asked to make a second choice, <b>which may be the same or different to your first choice.</b>
            To help with this, <b>your first choice will already be highlighted in yellow.</b>
        </p>
        <br>
        <p>Again, you will have 2.5 seconds, after which a random choice will be made if you do not choose manually.</p>
        <br>
        <div class="green-highlight-box">
            <p><b>To make your choice, press either the left or right arrow key on your keyboard.</b></p>
            <div class="green-highlight-box-image-container">
                <img src="{% static 'instructions/TaskInstructionsPage1/left_arrow.png' %}" alt="Left">
                <img src="{% static 'instructions/TaskInstructionsPage1/right_arrow.png' %}" alt="Right">
            </div>
        </div>
        <br>
        <p>The image associated with your second choice will subsequently be highlighted with a red box, <b>regardless if it is different to or the same as your first choice.</b></p>
        <br>

        <div class="dual-image-container">
            <div class="image-with-caption">
                <img src="{% static 'instructions/TaskInstructionsPage2/choice2.png' %}" alt="Choice 2" class="large-instruction-image">
                <p class="image-caption">Before making the second choice</p>
            </div>
            <div class="image-with-caption">
                <img src="{% static 'instructions/TaskInstructionsPage2/choice2_highlighted.png' %}" alt="Choice 2 Highlighted" class="large-instruction-image">
                <p class="image-caption">After selecting the image on the right.</p>
            </div>
        </div>
        <br>
        <p>You will then be asked to make your second bet, <b>which can be the same or different to your first bet.</b> 
            To help with this, your first bet will be highlighted in yellow. 
        <br>
        <div class="green-highlight-box">
            <p><b>To make your bet, press either the '1', '2' or '3' key on your keyboard.</b></p>
            <div class="green-highlight-box-image-container">
                <img src="{% static 'instructions/TaskInstructionsPage1/1_key.png' %}" alt="1">
                <img src="{% static 'instructions/TaskInstructionsPage1/2_key.png' %}" alt="2">
                <img src="{% static 'instructions/TaskInstructionsPage1/3_key.png' %}" alt="3">
            </div>
        </div>
        <br><p>
            This second bet will be highlighted by a red box, regardless if it is the same or different to your first.
            You will have 2.5 seconds, after which a random bet will be made for you if you do not choose manually within the time frame.</p>
            <div class="dual-image-container">
                <div class="image-with-caption">
                    <img src="{% static 'instructions/TaskInstructionsPage2/bet2.png' %}" alt="Bet 2" class="large-instruction-image">
                    <p class="image-caption">Before making the second bet</p>
                </div>
                <div class="image-with-caption">
                    <img src="{% static 'instructions/TaskInstructionsPage2/bet2_highlighted.png' %}" alt="Bet 2 Highlighted" class="large-instruction-image">
                    <p class="image-caption">After making a second bet of 2.</p>
                </div>
            </div>
        <br>
        <p>Your bonus payment will be calculated from your points total in the task, which is <b>also partly determined by your second choice and bet.</b>
            It is therefore important to <b>make your second choice and bet appropriately</b> to maximise your bonus.</p>
        </p>
        </div>
        <br>
        <p>Finally, you will receive <b>feedback for your second choice/bet</b> as well as the second choices made by others within the group.</p>

        <div class="image-container">
            <img src="{% static 'instructions/TaskInstructionsPage2/feedback.png' %}" alt="Feedback" width="600" height="auto">
        </div>
        <br>
        <br>

        <p>For yourself, you will see a coin, indicating whether you have won or lost points.</p>

        <div class="boxes-container">
            <div class="box-container">
                <div class="green-box">
                    <p><b>If the coin is presented by itself, it means that you won points in that round.</b></p>
                    <img src="{% static 'instructions/win.png' %}" class="box-image">
                </div>
            </div>
            <div class="box-container">
                <div class="red-box">
                    <p><b>If there is a red cross through the coin, it means that you lost points in that round.</b></p>
                    <img src="{% static 'instructions/loss.png' %}" class="box-image">
                </div>
            </div>
        </div>
        <br>
        <p>You also are provided with the <b>amount of points</b> gained or lost for that round.
            <b>The amount of points displayed represents the second choice and second bet only.</b></p>
        <div class="image-container">
            <img src="{% static 'instructions/TaskInstructionsPage2/points.png' %}" alt="Points" width="200" height="auto">
        </div>
        <br>
        <div class="red-highlight-box">
            <p class="normal-weight">As with the first choice/bet, it is important that you bet appropriately based on how confident you are.</p>
            <p>For example, if you bet 3 and win, you will receive 60 points, but if you bet 3 and lose, you will lose 60 points (as the bet is multiplied by 20).</p>
            <p>Conversely, if you bet 1 and win, you will only receive 20 points, but if you bet 1 and lose, you will only lose 20 points.</p>
        </div>
        <br>
        <p>You will also see the second choice for all the other players in the group (so you can determine whether they changed their choice) and an icon indicating whether they won or lost.
            <b>However, you will not see how much they gained or lost.</b></p>
        <br>
        <p>Again, the images will depict whether or not the second choices were made by the players themselves, or by the computer.</p>
        <div class="image-container feedback-image">
            <img src="{% static 'instructions/TaskInstructionsPage2/feedback_second.png' %}" alt="Points" width="700" height="auto">
            <div class="image-caption">
                <span>In this example, you can see the first choices were made by the computer for Players 3 and 4,
                    and the second choices were made by the computer for Player 1 and Player 2.</span>
            </div>
        </div>
        <br>
        <p>After this, you will move onto the next round, where you will start again by making a new first choice. There are a total of 40 rounds, lasting approximately 20 minutes.</p>
        <br>
        <div class="blue-highlight-box">
            <p>The 40 rounds are split into a number of blocks, where one image is more likely to give you points than the other. 
                For example, it may be initially better to choose the Green image than the Blue image. However, this will switch at several points within the experiment.<br></p>
            <p>It is therefore important to pay attention to the feedback and adjust your choices accordingly.</p>
        </div>
        <br>
        <p><b>Over the course of the task, you may therefore choose to either trust your own learning experience through trial and error and/or 
            take decisions from others into consideration, as some of the other players might learn faster than others.</b></p>
        <br>
        <div class="red-highlight-box">
            <p>You cannot lose money for doing badly (i.e. getting a negative score), but the more points you score, the more your bonus payment is!</p>
        </div>
        <br>
        <div class="blue-highlight-box">
            <p>After completing 40 rounds, the total number of points you earned will be displayed along with your bonus, 
                after which you can subsequently complete the questionnaires.</p>  
            <div class="image-container">
                <img src="{% static 'instructions/TaskInstructionsPage2/final_results.png' %}" alt="Final Results" width="600" height="auto">
            </div>
        </div>
        <br>
        <p>Please make sure that you understand how the task works, and what is expected before moving ahead as you will not be able to return to this page.</p>
        <br>
        <p>When you are ready, please press the button below to move onto the next page of instructions.</p>

        <button style="color: #fff; background-color: #007bff; border: 1px solid transparent; font-size: 1.5rem; padding: 10px 20px; border-radius: 0.25rem;">
            Next
        </button>
    </div>

{% endblock %}